<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link href="./styles/main.css" rel="stylesheet" />
    <style>
      * {
        font-family: "Press Start 2P", cursive;
        box-sizing: border-box;
        font-size: 18px;
      }
      body {
        background: #000;
        touch-action: manipulation;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      canvas {
        background: #eeeeff;
        width: 960px;
        height: 640px;
        display: block;
        margin: 0 auto;
      }

      button {
        border: 0;
        cursor: pointer;
        font-size: 16px;
      }

      button:hover {
        background-color: #ddd;
      }

      /* Mobile Controls Styles */
      .mobile-controls {
        position: fixed;
        bottom: 20px;
        left: 0;
        right: 0;
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        padding: 0 20px;
        pointer-events: none;
        z-index: 1000;
      }

      .dpad {
        position: relative;
        width: 120px;
        height: 120px;
        pointer-events: auto;
      }

      .dpad-btn {
        position: absolute;
        width: 50px;
        height: 50px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        background: rgba(255, 255, 255, 0.2);
        color: transparent;
        font-weight: bold;
        font-size: 20px;
        border-radius: 8px;
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.1s ease;
      }

      .dpad-up {
        top: 0;
        left: 35px;
      }

      .dpad-left {
        top: 35px;
        left: 0;
      }

      .dpad-right {
        top: 35px;
        right: 0;
      }

      .dpad-down {
        bottom: 0;
        left: 35px;
      }

      .action-buttons {
        pointer-events: auto;
      }

      .action-btn {
        width: 80px;
        height: 80px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        background: rgba(255, 255, 255, 0.15);
        color: transparent;
        font-weight: bold;
        font-size: 14px;
        border-radius: 50%;
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.1s ease;
      }

      .dpad-btn:active, .action-btn:active {
        transform: scale(0.95);
        background: rgba(255, 255, 255, 0.4);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      }

      /* Hide mobile controls on desktop */
      @media (min-width: 769px) {
        .mobile-controls {
          display: none;
        }
      }

      /* Responsive design for mobile */
      @media (max-width: 768px) {
        * {
          box-sizing: border-box;
        }

        html, body {
          margin: 0;
          padding: 0;
          overflow: hidden;
          width: 100vw;
          height: 100vh;
          position: fixed;
          -webkit-overflow-scrolling: touch;
        }

        /* Canvas and comic containers fill full mobile screen */
        canvas {
          width: 100vw !important;
          height: 100vh !important;
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
        }

        #comic_div {
          width: 100vw !important;
          height: 100vh !important;
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
        }

        /* Mobile text adjustments */
        #dialogueBox {
          width: 100vw !important;
          height: 40vh !important;
          max-width: 100vw !important;
          left: 0 !important;
          right: 0 !important;
          top: auto !important;
          bottom: 100px !important;
          padding: 20px !important;
          font-size: 14px !important;
          overflow: hidden;
          position: fixed;
          z-index: 1000;
        }

        #dialogueBoxText {
          overflow-y: auto;
          max-height: calc(40vh - 40px);
          padding: 10px !important;
          line-height: 1.4;
        }

        #dialogue_box_comic {
          height: 40vh !important;
          max-height: 40vh !important;
          width: 100vw !important;
          max-width: 100vw !important;
          top: auto !important;
          bottom: 100px !important;
          left: 0 !important;
          right: 0 !important;
          padding: 20px !important;
          font-size: 14px !important;
          overflow: visible;
          display: flex;
          flex-direction: column;
          position: fixed;
          z-index: 1000;
        }

        #dialogue_box_comic_text {
          font-size: 14px !important;
          line-height: 1.4 !important;
          flex: 1;
          overflow-y: auto;
          padding-right: 10px;
          scrollbar-width: thin;
          scrollbar-color: rgba(0,0,0,0.3) transparent;
          margin-top: 10px;
        }

        /* Webkit scrollbar styling for mobile */
        #dialogue_box_comic_text::-webkit-scrollbar {
          width: 4px;
        }

        #dialogue_box_comic_text::-webkit-scrollbar-track {
          background: transparent;
        }

        #dialogue_box_comic_text::-webkit-scrollbar-thumb {
          background: rgba(0,0,0,0.3);
          border-radius: 2px;
        }

        #dialogue_box_comic_title {
          font-size: 16px !important;
          margin-bottom: 10px;
        }

        #answerOptionsWrapper {
          position: relative !important;
          bottom: auto !important;
          right: auto !important;
          margin-top: 10px;
          max-height: 150px;
          overflow-y: auto;
        }

        .answerOption {
          margin: 5px 0 !important;
          padding: 8px 12px !important;
          font-size: 12px !important;
        }
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"> </canvas>
    <div id="dialogueBox">
      <div id="dialogueBoxText">testo_game</div>
      <div id="answerOptionsWrapper">
        <div id="dialogueBoxTextResponse" class="answerOption selectedAnswer">
          Risposta una
        </div>
        <div id="dialogueBoxTextResponse" class="answerOption">
          Risposta due
        </div>
        <div id="dialogueBoxTextResponse" class="answerOption">
          Risposta tre
        </div>
        <div id="dialogueBoxTextResponse" class="answerOption">
          Risposta quattro
        </div>
      </div>
    </div>
    <div
      id="comic_div"
      style="
        /* background: magenta; */
        /* opacity: 0.5; */
        position: absolute;
        overflow: hidden;
      "
    >
      <img id="comic_background" src="./assets/d_casa.jpg" style="" />
      <div
        style="
          top: 0;
          width: 100%;
          height: 100%;
          background: yellow;
          opacity: 0.5;
          position: absolute;
        "
      ></div>

      <div
        id="dialogue_box_comic"
        style="
          position: absolute;
          top: 400px;
          right: 0;
          bottom: 0;
          left: 0;
          background-color: white;
          padding: 24px;
          cursor: pointer;
          opacity: 0.9;
          border-top: black;
          border-style: solid;
          border-width: 5px;
        "
      >
        <span
          style="position: relative; font-size: 24px; font-weight: bold"
          id="dialogue_box_comic_title"
          >RATTUSO</span
        ><br />
        <span id="dialogue_box_comic_text"> testo_comic_text </span>
      </div>
    </div>

    <!-- Mobile Controls -->
    <div id="mobileControls" class="mobile-controls">
      <!-- D-pad for movement -->
      <div class="dpad">
        <button id="btn-up" class="dpad-btn dpad-up" data-key="w"></button>
        <button id="btn-left" class="dpad-btn dpad-left" data-key="a"></button>
        <button id="btn-down" class="dpad-btn dpad-down" data-key="s"></button>
        <button id="btn-right" class="dpad-btn dpad-right" data-key="d"></button>
      </div>

      <!-- Action button -->
      <div class="action-buttons">
        <button id="btn-action" class="action-btn" data-key=" "></button>
      </div>
    </div>
  </body>
  <!-- <script src="data/audio.js"></script> -->
  <!-- <script src="data/collisions.js"></script> -->
  <!-- <script src="data/attacks.js"></script> -->
  <!-- <script src="data/monsters.js"></script> -->
  <script src="data/characters.js"></script>
  <script src="data/objects.js"></script>
  <script src="js/utils.js"></script>
  <!-- <script type="module" src="js/onLoad.js"></script> -->
  <script src="classes.js" type="module"></script>
  <script src="index.js" type="module"></script>
</html>
